<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mediocre Shop CA</title>
    <link rel="stylesheet" href="./css/global.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/topnav.css">
    <link rel="stylesheet" href="./css/accessories-page.css">
    <link rel="stylesheet" href="./css/home-page.css">
    <link rel="stylesheet" href="./css/footer.css">
</head>

<body>
    <header>
        <a href="index.html" class="header-link">
            <img src="./assets/images/logos/logo.jpg" alt="Mediocre Shop CA Logo" class="header-image">
            <h1 class="header-title">Mediocre Shop CA</h1>
        </a>
        <div class="cart-icon">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M5 4h1.5L9 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-8.5-3h9.25L19 7H7.312" />
            </svg>
            <span>0</span>
        </div>
    </header>
    <ul class="topnav">
        <li><a href="index.html">Laptops</a></li>
        <li><a class="active" href="accessories.html">Accessories</a></li>
        <li><a href="about.html">About</a></li>
    </ul>
    <main>
        <section class="home-page">
            <h2>Select an Accessory</h2>
            <div class="card-container" id="accessories-card-container">
                <!-- Dynamic content for accessories will be loaded here -->
            </div>
        </section>

        <div class="cart-container">
            <section class="cart-tab">
                <h1>Shopping Cart 
                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                        viewBox="0 2 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 4h1.5L9 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-8.5-3h9.25L19 7H7.312" />
                    </svg>
                    <a href="./cart.html" class="cart-page-link">View On Cart Page</a>
                </h1>
                <div class="list-cart">
                </div>
                <div class="cart-total-container">
                    <span class="title">Total Amount To Pay</span>
                    <span class="to-pay">$0.00</span>
                </div>
                <div class="btn">
                    <button class="close">Close</button>
                    <button onclick="location.href='./cart.html'" class="checkout">Check Out</button>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <p class="footer-text">&copy; 2024 Mediocre Shop CA</p>
    </footer>

    <script src="./js/global.js"></script>
    <script src="./js/helper.js"></script>
    <script>
        function loadAvailableAccessories() {
            const container = document.getElementById('accessories-card-container');
            
            Object.keys(laptops).forEach(key => {
                const accessory = laptops[key];
                if (accessory.product_type == "laptop") {
                    return;
                }
                const card = document.createElement('div');
                card.classList.add('card');

                const link = document.createElement('a');
                link.href = `product-page.html?id=${accessory.id}`;

                const img = document.createElement('img');
                img.src = accessory.img1;
                img.alt = accessory.name;

                const cardContent = document.createElement('div');
                cardContent.classList.add('card-content');

                const h3 = document.createElement('h3');
                h3.textContent = accessory.name;

                const price = document.createElement('p');
                price.classList.add('price');

                if (accessory.originalPrice) {
                    price.innerHTML = `<span class="original-price">${accessory.originalPrice}</span>
                           <span class="new-price">${accessory.price}</span>`;
                } else {
                    price.textContent = accessory.price;
                }

                const addToCartButton = document.createElement('a');
                addToCartButton.textContent = "Add to Cart";
                addToCartButton.classList.add('add-to-cart-button');

                addToCartButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    handleAddToShoppingCart(`${accessory.id}`);
                    addProductToCartContainerComponent();
                    updatecartContainerToPaySpan(GetFloatValue(laptops[accessory.id].price), 'plus');
                    cartContainerToPaySpan.innerHTML = CURRENT_TOTAL;
                    alert(`${accessory.name} added to cart`);
                });

                const buyNowButton = document.createElement('a');
                buyNowButton.href = accessory.buyNowLink;
                buyNowButton.classList.add('buy-now-button');
                buyNowButton.textContent = "Buy Now";

                cardContent.appendChild(h3);
                cardContent.appendChild(price);
                cardContent.appendChild(addToCartButton);
                cardContent.appendChild(buyNowButton);
                link.appendChild(img);
                link.appendChild(cardContent);

                card.appendChild(link);
                container.appendChild(card);
            });
        }

        window.onload = function() {
            loadAvailableAccessories();
            if(localStorage.getItem('cart')) {
                CART_ITEMS = JSON.parse(localStorage.getItem('cart'));
                addProductToCartContainerComponent();
            }
            if(localStorage.getItem('cart-total')) {
                CURRENT_TOTAL = JSON.parse(localStorage.getItem('cart-total'));
                updatecartContainerToPaySpan();
            }
        };
    </script>
</body>

</html>
